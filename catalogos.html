<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arca.OS | Catálogos - Prototipo</title>
    <!-- Google Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="arca-continental-theme.css">
    <style>
        /* Catalog Tabs */
        .catalog-tabs {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            padding: 16px 20px;
            border-bottom: 1px solid var(--color-neutral-3);
            background: var(--color-neutral-1);
        }

        .catalog-tab {
            padding: 10px 16px;
            border-radius: 10px;
            border: 1px solid var(--color-neutral-3);
            background: var(--color-neutral-0);
            font-size: 13px;
            font-weight: 500;
            color: var(--color-neutral-7);
            cursor: pointer;
            transition: var(--transition-base);
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-primary);
        }

        .catalog-tab:hover {
            border-color: var(--color-neutral-5);
            background: var(--color-neutral-2);
        }

        .catalog-tab.active {
            background: var(--color-red);
            border-color: var(--color-red);
            color: white;
        }

        .catalog-tab .material-symbols-rounded {
            font-size: 18px;
        }

        .catalog-tab .count {
            background: rgba(255,255,255,0.2);
            padding: 2px 8px;
            border-radius: 100px;
            font-size: 11px;
            font-weight: 600;
        }

        .catalog-tab:not(.active) .count {
            background: var(--color-neutral-2);
            color: var(--color-neutral-6);
        }

        /* Catalog name cell */
        .catalog-name {
            font-weight: 600;
            color: var(--color-neutral-9);
        }

        .catalog-description {
            font-size: 12px;
            color: var(--color-neutral-6);
            margin-top: 4px;
        }

        /* Meta info */
        .meta-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .meta-user {
            font-size: 13px;
            font-weight: 500;
            color: var(--color-neutral-8);
        }

        .meta-date {
            font-size: 11px;
            color: var(--color-neutral-5);
        }

        /* Row actions */
        .row-actions {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .action-btn.edit:hover {
            background: var(--color-info-light);
            color: var(--color-info);
        }

        .action-btn.delete:hover {
            background: var(--color-error-light);
            color: var(--color-error);
        }

        /* Status badge */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 100px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-badge.active {
            background: var(--color-success-light);
            color: var(--color-success);
        }

        .status-badge.inactive {
            background: var(--color-neutral-2);
            color: var(--color-neutral-6);
        }

        /* Form Switch */
        .form-switch-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .switch {
            position: relative;
            width: 48px;
            height: 26px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-neutral-3);
            border-radius: 100px;
            transition: var(--transition-base);
        }

        .switch-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: var(--transition-base);
            box-shadow: var(--shadow-s);
        }

        .switch input:checked + .switch-slider {
            background: var(--color-success);
        }

        .switch input:checked + .switch-slider:before {
            transform: translateX(22px);
        }

        .switch-label {
            font-size: 14px;
            color: var(--color-neutral-7);
        }

        /* Danger button */
        .btn-danger {
            background: var(--color-error-light);
            color: var(--color-error);
        }

        .btn-danger:hover {
            background: var(--color-error);
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .catalog-tabs {
                overflow-x: auto;
                flex-wrap: nowrap;
                padding-bottom: 12px;
            }

            .catalog-tab {
                flex-shrink: 0;
            }

            .hide-mobile {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="app-layout">
        <!-- Sidebar Overlay (Mobile) -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Toggle Button -->
            <button class="sidebar-toggle" id="sidebarToggle" title="Colapsar menú">
                <span class="material-symbols-rounded">chevron_left</span>
            </button>

            <div class="sidebar-header">
                <img src="assets/Arca_continental_logo_simple.png" alt="Arca Continental" class="sidebar-company-logo" />
                <div class="sidebar-brand">
                    <div class="sidebar-logo">
                        <span class="logo-text">ARCA</span>
                        <span class="logo-dot"></span>
                        <span class="logo-text">OS</span>
                    </div>
                    <span class="sidebar-subtitle">OR Equipo frío</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <a href="layout.html" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">dashboard</span></span>
                        <span>Dashboard</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Operación</div>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">assignment</span></span>
                        <span>Órdenes de Recuperación</span>
                        <span class="nav-item-badge">24</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">account_balance</span></span>
                        <span>Contraloría</span>
                        <span class="nav-item-badge">8</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">person_check</span></span>
                        <span>Aprobación Jefe de Ventas</span>
                        <span class="nav-item-badge">5</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">manage_accounts</span></span>
                        <span>Aprobación Gerente de Ventas</span>
                        <span class="nav-item-badge">3</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">location_city</span></span>
                        <span>Aprobación Gerente Regional</span>
                        <span class="nav-item-badge">2</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">corporate_fare</span></span>
                        <span>Aprobación Gerente CH</span>
                        <span class="nav-item-badge">1</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">handshake</span></span>
                        <span>Comodato</span>
                        <span class="nav-item-badge">12</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Auditoría</div>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">bar_chart</span></span>
                        <span>Reportes</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">history</span></span>
                        <span>Bitácora de Acciones</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Datos</div>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">sync</span></span>
                        <span>Sincronizar</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">send</span></span>
                        <span>Enviar Información</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Administración</div>
                    <a href="roles.html" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">admin_panel_settings</span></span>
                        <span>Configuración Permisos</span>
                    </a>
                    <a href="catalogos.html" class="nav-item active">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">category</span></span>
                        <span>Catálogos</span>
                    </a>
                    <a href="recordatorios.html" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">notifications_active</span></span>
                        <span>Recordatorios</span>
                    </a>
                    <a href="usuarios.html" class="nav-item">
                        <span class="nav-item-icon"><span class="material-symbols-rounded">group</span></span>
                        <span>Usuarios</span>
                    </a>
                </div>
            </nav>

        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Header -->
            <header class="top-header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn"><span class="material-symbols-rounded">menu</span></button>
                    <h1 class="font-size-2xl font-bold text-neutral-9">Catálogos</h1>
                    <div class="breadcrumb font-size-xs text-neutral-5">
                        <a href="layout.html">Inicio</a> / <a href="#">Administración</a> / Catálogos
                    </div>
                </div>

                <div class="header-right">
                    <button class="header-btn" title="Buscar"><span class="material-symbols-rounded">search</span></button>
                    <button class="header-btn" title="Notificaciones">
                        <span class="material-symbols-rounded">notifications</span>
                        <span class="badge">3</span>
                    </button>
                    <button class="header-btn" title="Ayuda"><span class="material-symbols-rounded">help</span></button>
                    <div class="header-divider"></div>
                    <div class="header-user" id="headerUser">
                        <div class="user-chip" onclick="toggleUserDropdown()">
                            <div class="header-avatar">CO</div>
                            <div class="user-chip-info">
                                <span class="font-size-s font-semi-bold text-neutral-9">Carlos Operador</span>
                                <span class="font-size-xxs text-neutral-5">Admin TI</span>
                            </div>
                            <span class="material-symbols-rounded text-neutral-5 icon-size-20">expand_more</span>
                        </div>
                        <div class="user-dropdown">
                            <div class="dropdown-header">
                                <div class="dropdown-user-info">
                                    <div class="dropdown-avatar">CO</div>
                                    <div class="dropdown-user-details">
                                        <div class="dropdown-user-name">Carlos Operador</div>
                                        <div class="dropdown-user-role">Admin TI</div>
                                        <div class="dropdown-user-email">carlos.operador@arcacontal.com</div>
                                    </div>
                                </div>
                            </div>
                            <div class="dropdown-menu">
                                <button class="dropdown-item">
                                    <span class="material-symbols-rounded">person</span>
                                    Mi Perfil
                                </button>
                                <button class="dropdown-item">
                                    <span class="material-symbols-rounded">settings</span>
                                    Configuración
                                </button>
                                <div class="dropdown-divider"></div>
                                <button class="dropdown-item logout" onclick="handleLogout()">
                                    <span class="material-symbols-rounded">logout</span>
                                    Cerrar Sesión
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Fixed Header -->
                <div class="content-header-fixed">
                    <h2 class="font-size-2xl font-bold text-neutral-9">Administración de Catálogos</h2>
                    <div class="display-flex gap-s">
                        <button class="btn btn-primary" onclick="openAddModal()">
                            <span class="material-symbols-rounded">add</span>
                            <span>Agregar Registro</span>
                        </button>
                    </div>
                </div>

                <!-- Scrollable Content Card -->
                <div class="content-scroll-card">
                    <!-- Catalog Tabs -->
                    <div class="catalog-tabs">
                        <button class="catalog-tab active" data-catalog="hallazgo">
                            <span class="material-symbols-rounded">search</span>
                            Hallazgo
                            <span class="count">14</span>
                        </button>
                        <button class="catalog-tab" data-catalog="estatus">
                            <span class="material-symbols-rounded">flag</span>
                            Estatus Cliente
                            <span class="count">8</span>
                        </button>
                        <button class="catalog-tab" data-catalog="centro">
                            <span class="material-symbols-rounded">store</span>
                            Centro
                            <span class="count">156</span>
                        </button>
                        <button class="catalog-tab" data-catalog="ruta">
                            <span class="material-symbols-rounded">route</span>
                            Ruta
                            <span class="count">42</span>
                        </button>
                        <button class="catalog-tab" data-catalog="territorio">
                            <span class="material-symbols-rounded">map</span>
                            Territorio
                            <span class="count">12</span>
                        </button>
                        <button class="catalog-tab" data-catalog="region">
                            <span class="material-symbols-rounded">location_city</span>
                            Región
                            <span class="count">6</span>
                        </button>
                    </div>

                    <!-- Filters Section -->
                    <div class="users-filters">
                        <div class="filter-group search-group">
                            <span class="material-symbols-rounded search-icon">search</span>
                            <input type="text" class="form-input search-input" placeholder="Buscar en catálogo..." id="searchInput">
                        </div>
                        <div class="filter-group toggle-group">
                            <span class="toggle-label">Mostrar inactivos:</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="showInactiveToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- Catalog Table -->
                    <div class="table-container">
                        <table class="data-table" id="catalogTable">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th class="hide-mobile">Creado por</th>
                                    <th class="hide-mobile">Actualizado por</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="catalogTableBody">
                                <!-- Content will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <div class="pagination">
                        <div class="pagination-info">
                            <span class="font-size-s text-neutral-6">Mostrando <strong>1-10</strong> de <strong id="totalCount">14</strong> registros</span>
                        </div>
                        <div class="pagination-controls">
                            <button class="pagination-btn" disabled title="Primera página">
                                <span class="material-symbols-rounded">first_page</span>
                            </button>
                            <button class="pagination-btn" disabled title="Anterior">
                                <span class="material-symbols-rounded">chevron_left</span>
                            </button>
                            <div class="pagination-pages">
                                <button class="pagination-page active">1</button>
                                <button class="pagination-page">2</button>
                                <button class="pagination-page">3</button>
                                <span class="pagination-ellipsis">...</span>
                                <button class="pagination-page">10</button>
                            </div>
                            <button class="pagination-btn" title="Siguiente">
                                <span class="material-symbols-rounded">chevron_right</span>
                            </button>
                            <button class="pagination-btn" title="Última página">
                                <span class="material-symbols-rounded">last_page</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add/Edit Modal -->
    <div class="modal-overlay" id="editModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Agregar Hallazgo</h2>
                <button class="modal-close" onclick="closeEditModal()">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Nombre *</label>
                    <input type="text" class="form-input" id="itemName" placeholder="Nombre del registro">
                </div>
                <div class="form-group">
                    <label class="form-label">Descripción</label>
                    <textarea class="form-input" id="itemDescription" placeholder="Descripción opcional del registro" rows="3"></textarea>
                    <p class="font-size-xs text-neutral-5 margin-top-xs">Opcional. Ayuda a identificar el propósito del registro.</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Estado</label>
                    <div class="form-switch-group">
                        <label class="switch">
                            <input type="checkbox" id="itemStatus" checked>
                            <span class="switch-slider"></span>
                        </label>
                        <span class="switch-label" id="statusLabel">Activo</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeEditModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="saveItem()">
                    <span class="material-symbols-rounded">save</span>
                    Guardar
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal-container modal-sm">
            <div class="modal-header">
                <h2 class="modal-title">Confirmar Eliminación</h2>
                <button class="modal-close" onclick="closeDeleteModal()">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
            <div class="modal-body">
                <p class="text-neutral-7" style="line-height: 1.6;">
                    ¿Estás seguro de que deseas eliminar <strong id="deleteItemName">este registro</strong>? Esta acción no se puede deshacer.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeDeleteModal()">Cancelar</button>
                <button class="btn btn-danger" onclick="confirmDelete()">
                    <span class="material-symbols-rounded">delete</span>
                    Eliminar
                </button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <span class="material-symbols-rounded" id="toastIcon">check_circle</span>
        <span id="toastMessage">Cambios guardados exitosamente</span>
    </div>

    <script>
        // Catalog Data
        const catalogs = {
            hallazgo: [
                { id: 1, name: 'Cliente Cerrado - Se llevaron el equipo', description: 'El cliente cerró el negocio y se llevaron el equipo', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 2, name: 'Cliente Cerrado Definitivamente - Equipo está dentro', description: 'Negocio cerrado con equipo dentro del local', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: 'Carlos Operador', updatedAt: '20/01/2024', active: true },
                { id: 3, name: 'Cliente No quiere entregar equipo', description: 'Cliente se niega a entregar el equipo', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 4, name: 'Cliente dice que se lo embargaron / Robaron', description: 'El equipo fue embargado o reportado como robado', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 5, name: 'Otras (describir)', description: 'Otras situaciones no contempladas', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 6, name: 'Equipo se quemó', description: 'Equipo dañado por incendio', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 7, name: 'Cliente que no registra venta y se niega a devolver el equipo en comodato', description: 'Cliente sin ventas que retiene equipo', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 8, name: 'Cliente dice que lo entregó', description: 'Cliente afirma haber entregado el equipo', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 9, name: 'Incendio en instalaciones', description: 'Siniestro por incendio en el local', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 10, name: 'Cliente activo dice que no tiene equipo ni lo ha solicitado', description: 'Discrepancia en registros de equipo', createdBy: 'Admin Sistema', createdAt: '15/01/2024', updatedBy: null, updatedAt: null, active: false },
            ],
            estatus: [
                { id: 1, name: 'Activo', description: 'Cliente con operaciones normales', createdBy: 'Admin Sistema', createdAt: '10/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 2, name: 'Inactivo', description: 'Cliente sin actividad reciente', createdBy: 'Admin Sistema', createdAt: '10/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 3, name: 'Suspendido', description: 'Cliente con restricciones temporales', createdBy: 'Admin Sistema', createdAt: '10/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 4, name: 'Bloqueado', description: 'Cliente con restricciones permanentes', createdBy: 'Admin Sistema', createdAt: '10/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 5, name: 'Cerrado', description: 'Negocio cerrado', createdBy: 'Admin Sistema', createdAt: '10/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 6, name: 'En proceso de baja', description: 'Cliente en trámite de cierre', createdBy: 'Admin Sistema', createdAt: '10/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 7, name: 'Nuevo', description: 'Cliente recién registrado', createdBy: 'Admin Sistema', createdAt: '10/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 8, name: 'Pendiente de activación', description: 'En espera de validación', createdBy: 'Admin Sistema', createdAt: '10/01/2024', updatedBy: null, updatedAt: null, active: true },
            ],
            centro: [
                { id: 1, name: 'CEDIS Monterrey Norte', description: 'Centro de distribución zona norte', createdBy: 'Admin Sistema', createdAt: '05/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 2, name: 'CEDIS Monterrey Sur', description: 'Centro de distribución zona sur', createdBy: 'Admin Sistema', createdAt: '05/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 3, name: 'CEDIS Guadalajara', description: 'Centro de distribución Jalisco', createdBy: 'Admin Sistema', createdAt: '05/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 4, name: 'CEDIS Ciudad de México', description: 'Centro de distribución CDMX', createdBy: 'Admin Sistema', createdAt: '05/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 5, name: 'CEDIS Tijuana', description: 'Centro de distribución Baja California', createdBy: 'Admin Sistema', createdAt: '05/01/2024', updatedBy: null, updatedAt: null, active: true },
            ],
            ruta: [
                { id: 1, name: 'Ruta 001 - Centro', description: 'Zona centro de la ciudad', createdBy: 'Admin Sistema', createdAt: '08/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 2, name: 'Ruta 002 - Norte', description: 'Zona norte industrial', createdBy: 'Admin Sistema', createdAt: '08/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 3, name: 'Ruta 003 - Sur', description: 'Zona sur residencial', createdBy: 'Admin Sistema', createdAt: '08/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 4, name: 'Ruta 004 - Poniente', description: 'Zona poniente comercial', createdBy: 'Admin Sistema', createdAt: '08/01/2024', updatedBy: null, updatedAt: null, active: true },
            ],
            territorio: [
                { id: 1, name: 'Zona Metropolitana', description: 'Área metropolitana de Monterrey', createdBy: 'Admin Sistema', createdAt: '03/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 2, name: 'Norte de Nuevo León', description: 'Región norte del estado', createdBy: 'Admin Sistema', createdAt: '03/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 3, name: 'Sur de Nuevo León', description: 'Región sur del estado', createdBy: 'Admin Sistema', createdAt: '03/01/2024', updatedBy: null, updatedAt: null, active: true },
            ],
            region: [
                { id: 1, name: 'Región Norte', description: 'Estados del norte de México', createdBy: 'Admin Sistema', createdAt: '01/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 2, name: 'Región Centro', description: 'Estados del centro de México', createdBy: 'Admin Sistema', createdAt: '01/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 3, name: 'Región Sur', description: 'Estados del sur de México', createdBy: 'Admin Sistema', createdAt: '01/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 4, name: 'Región Pacífico', description: 'Costa del Pacífico', createdBy: 'Admin Sistema', createdAt: '01/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 5, name: 'Región Golfo', description: 'Costa del Golfo de México', createdBy: 'Admin Sistema', createdAt: '01/01/2024', updatedBy: null, updatedAt: null, active: true },
                { id: 6, name: 'Servicios Ejecutivos', description: 'Oficinas corporativas', createdBy: 'Admin Sistema', createdAt: '01/01/2024', updatedBy: null, updatedAt: null, active: true },
            ]
        };

        const catalogNames = {
            hallazgo: 'Hallazgo',
            estatus: 'Estatus Cliente',
            centro: 'Centro',
            ruta: 'Ruta',
            territorio: 'Territorio',
            region: 'Región'
        };

        let currentCatalog = 'hallazgo';
        let currentEditItem = null;
        let itemToDelete = null;

        // Mobile Menu
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        mobileMenuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
            sidebarOverlay.classList.toggle('active');
        });

        sidebarOverlay.addEventListener('click', () => {
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('active');
        });

        // Sidebar Toggle
        const sidebarToggle = document.getElementById('sidebarToggle');
        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('collapsed');
        });

        // User Dropdown
        function toggleUserDropdown() {
            const headerUser = document.getElementById('headerUser');
            headerUser.classList.toggle('active');
        }

        document.addEventListener('click', (e) => {
            const headerUser = document.getElementById('headerUser');
            if (!headerUser.contains(e.target)) {
                headerUser.classList.remove('active');
            }
        });

        function handleLogout() {
            alert('Cerrando sesión...');
        }

        // Catalog Tabs
        const catalogTabs = document.querySelectorAll('.catalog-tab');
        catalogTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                catalogTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentCatalog = tab.dataset.catalog;
                renderCatalog();
            });
        });

        // Render Catalog
        function renderCatalog() {
            const data = catalogs[currentCatalog];
            const tbody = document.getElementById('catalogTableBody');
            const totalCount = document.getElementById('totalCount');

            totalCount.textContent = data.length;

            tbody.innerHTML = data.map(item => `
                <tr>
                    <td>
                        <div class="catalog-name">${item.name}</div>
                        ${item.description ? `<div class="catalog-description">${item.description}</div>` : ''}
                    </td>
                    <td class="hide-mobile">
                        <div class="meta-info">
                            <span class="meta-user">${item.createdBy}</span>
                            <span class="meta-date">${item.createdAt}</span>
                        </div>
                    </td>
                    <td class="hide-mobile">
                        ${item.updatedBy ? `
                            <div class="meta-info">
                                <span class="meta-user">${item.updatedBy}</span>
                                <span class="meta-date">${item.updatedAt}</span>
                            </div>
                        ` : '<span class="text-neutral-5">—</span>'}
                    </td>
                    <td>
                        <span class="status-badge ${item.active ? 'active' : 'inactive'}">
                            <span class="status-dot"></span>
                            ${item.active ? 'Activo' : 'Inactivo'}
                        </span>
                    </td>
                    <td>
                        <div class="row-actions">
                            <button class="action-btn edit" title="Editar" onclick="editItem(${item.id})">
                                <span class="material-symbols-rounded">edit</span>
                            </button>
                            <button class="action-btn delete" title="Eliminar" onclick="deleteItem(${item.id}, '${item.name.replace(/'/g, "\\'")}')">
                                <span class="material-symbols-rounded">delete</span>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Search
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const rows = document.querySelectorAll('#catalogTableBody tr');
            rows.forEach(row => {
                const name = row.querySelector('.catalog-name').textContent.toLowerCase();
                const description = row.querySelector('.catalog-description')?.textContent.toLowerCase() || '';
                row.style.display = (name.includes(query) || description.includes(query)) ? '' : 'none';
            });
        });

        // Modal Functions
        const editModal = document.getElementById('editModal');
        const deleteModal = document.getElementById('deleteModal');

        function openAddModal() {
            currentEditItem = null;
            document.getElementById('modalTitle').textContent = `Agregar ${catalogNames[currentCatalog]}`;
            document.getElementById('itemName').value = '';
            document.getElementById('itemDescription').value = '';
            document.getElementById('itemStatus').checked = true;
            updateStatusLabel();
            editModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function editItem(id) {
            const item = catalogs[currentCatalog].find(i => i.id === id);
            if (!item) return;

            currentEditItem = item;
            document.getElementById('modalTitle').textContent = `Editar ${catalogNames[currentCatalog]}`;
            document.getElementById('itemName').value = item.name;
            document.getElementById('itemDescription').value = item.description || '';
            document.getElementById('itemStatus').checked = item.active;
            updateStatusLabel();
            editModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeEditModal() {
            editModal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function saveItem() {
            const name = document.getElementById('itemName').value.trim();
            const description = document.getElementById('itemDescription').value.trim();
            const active = document.getElementById('itemStatus').checked;

            if (!name) {
                alert('Por favor ingresa un nombre');
                return;
            }

            // Simulate save
            const btn = event.target;
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<span class="material-symbols-rounded spinning">sync</span> Guardando...';
            btn.disabled = true;

            setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.disabled = false;
                closeEditModal();

                if (currentEditItem) {
                    // Update existing
                    currentEditItem.name = name;
                    currentEditItem.description = description;
                    currentEditItem.active = active;
                    currentEditItem.updatedBy = 'Carlos Operador';
                    currentEditItem.updatedAt = new Date().toLocaleDateString('es-MX');
                    showToast('Registro actualizado exitosamente', 'success');
                } else {
                    // Add new
                    const newId = Math.max(...catalogs[currentCatalog].map(i => i.id)) + 1;
                    catalogs[currentCatalog].unshift({
                        id: newId,
                        name,
                        description,
                        createdBy: 'Carlos Operador',
                        createdAt: new Date().toLocaleDateString('es-MX'),
                        updatedBy: null,
                        updatedAt: null,
                        active
                    });
                    showToast('Registro agregado exitosamente', 'success');
                }

                renderCatalog();
                updateTabCounts();
            }, 1000);
        }

        function deleteItem(id, name) {
            itemToDelete = id;
            document.getElementById('deleteItemName').textContent = name;
            deleteModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeDeleteModal() {
            deleteModal.classList.remove('active');
            document.body.style.overflow = '';
            itemToDelete = null;
        }

        function confirmDelete() {
            if (!itemToDelete) return;

            const btn = event.target;
            const originalHTML = btn.innerHTML;
            btn.innerHTML = '<span class="material-symbols-rounded spinning">sync</span> Eliminando...';
            btn.disabled = true;

            setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.disabled = false;
                closeDeleteModal();

                catalogs[currentCatalog] = catalogs[currentCatalog].filter(i => i.id !== itemToDelete);
                renderCatalog();
                updateTabCounts();
                showToast('Registro eliminado exitosamente', 'success');
            }, 1000);
        }

        // Status Toggle
        const statusToggle = document.getElementById('itemStatus');
        const statusLabel = document.getElementById('statusLabel');

        statusToggle.addEventListener('change', updateStatusLabel);

        function updateStatusLabel() {
            statusLabel.textContent = statusToggle.checked ? 'Activo' : 'Inactivo';
        }

        // Update Tab Counts
        function updateTabCounts() {
            catalogTabs.forEach(tab => {
                const catalog = tab.dataset.catalog;
                const count = catalogs[catalog].length;
                tab.querySelector('.count').textContent = count;
            });
        }

        // Toast
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            const toastIcon = document.getElementById('toastIcon');

            toast.className = 'toast ' + type;
            toastMessage.textContent = message;
            toastIcon.textContent = type === 'success' ? 'check_circle' : 'error';
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Close modals on overlay click
        editModal.addEventListener('click', (e) => {
            if (e.target === editModal) closeEditModal();
        });

        deleteModal.addEventListener('click', (e) => {
            if (e.target === deleteModal) closeDeleteModal();
        });

        // Close modals on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                if (editModal.classList.contains('active')) closeEditModal();
                if (deleteModal.classList.contains('active')) closeDeleteModal();
            }
        });

        // Initial render
        renderCatalog();
    </script>
</body>
</html>
